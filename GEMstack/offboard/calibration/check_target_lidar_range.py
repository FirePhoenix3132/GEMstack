import open3d as o3d
import numpy as np

lidar_data = np.load('./data/hw3/step1/lidar4.npz')
lidar_pts = lidar_data['arr_0']
print (lidar_pts.shape)

target_idxs = [21483, 21456, 21426, 21441, 21458, 21590, 21445, 21453, 21650, 21505, 21604, 21432, 21780, 21430, 21890, 21552, 21537, 21531, 21568, 21550, 21546, 21562, 21481, 21678, 21566, 21710, 21582, 21438, 21832, 21662, 21646, 21598, 21740, 21660, 21447, 21644, 21724, 21770, 21754, 21738, 22718, 22778, 21522, 22704, 22649, 22988, 21708, 22693, 21600, 22782, 22946, 22768, 24103, 22921, 21814, 22799, 22815, 22831, 22847, 21756, 22938, 23137, 21786, 23165, 22968, 21470, 23046, 21698, 23077, 23093, 23322, 23125, 22784, 21499, 22878, 23075, 23366, 22753, 23338, 23141, 22974, 23171, 22795, 22992, 23186, 23232, 21474, 23247, 21730, 23306, 21594, 23367, 21529, 22908, 21614, 23781, 24022, 21858, 23828, 23230, 24009, 23812, 22893, 23766, 23751, 23994, 23797, 21692, 23071, 24056, 22874, 21489, 23262, 24041, 23844, 23810, 22984, 21493, 24054, 23857, 23031, 22722, 23904, 21628, 23992, 23795, 22857, 23842, 23016, 21722, 23889, 23354, 23936, 24037, 23840, 23793, 23887, 22964, 23061, 23934, 22863, 21578, 23154, 21466, 22845, 23042, 24027, 23980, 21612, 23779, 21462, 23826, 24067, 21706, 22691, 23873, 23920, 23967, 23216, 21620, 23196, 24069, 21588, 23952, 21491, 23855, 24043, 23996, 22923, 24087, 23200, 24073, 21694, 24058, 21816, 22998, 23289, 21507, 23871, 23824, 23965, 24012]
lidar_pts = lidar_pts[target_idxs]

M = [[ 9.99997008e-01, -1.61203868e-04 , -2.44032393e-03  ,0.81915 ],
     [ 1.61203868e-04 , 9.99999987e-01 ,-1.96815237e-07   ,0],
     [ 2.44032393e-03 ,-1.96815237e-07 , 9.99997021e-01   ,1.7272 ],
     [ 0.             ,  0. ,         0.     ,                  1.        ]]

M = np.array(M)

print ('lidar range of object:')
names = ['x', 'y', 'z']
ranges = zip(np.min(lidar_pts, axis=0), np.max(lidar_pts, axis=0))
for name, range in zip(names, ranges):
    print (f'{name} range: {range}')
